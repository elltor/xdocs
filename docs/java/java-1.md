# Java åŸºç¡€çŸ¥è¯†

## é¢å‘å¯¹è±¡

é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

- å°è£…ï¼šå¯¹å†…éƒ¨æ•°æ®è¿›è¡Œéšè—ï¼Œå¯¹å¤–æš´éœ²å…¬å…±æ–¹æ³•æä¾›è°ƒç”¨
- ç»§æ‰¿ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»å¯ä»¥ä½¿ç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œæœ¬è´¨æ˜¯ä»£ç å¤ç”¨æŠ€æœ¯
- å¤šæ€ï¼šç›¸åŒçš„æ–¹æ³•ï¼Œå‚æ•°çš„æ•°é‡ã€é¡ºåºã€ç±»åž‹èƒ½è¡¨çŽ°å‡ºä¸åŒçš„åŠŸèƒ½

å·¥ç¨‹å®žè·µï¼Œé€šå¸¸ç»§æ‰¿çˆ¶ç±»å¹¶ä¸æ˜¯ä¸ºäº†ä½¿ç”¨çˆ¶ç±»ä¸­çš„æ–¹æ³•è€Œæ˜¯è¦†ç›–é‡å†™ï¼Œå› ä¸ºç±»ä¸­çš„æ–¹æ³•ä¸èƒ½æ»¡è¶³éœ€è¦è€Œä¸”å…¶ä»–æ–¹æ³•éœ€è¦ä¿ç•™ã€‚

### ç»§æ‰¿çš„åº•å±‚å®žçŽ°

### å¤šæ€çš„åº•å±‚å®žçŽ°

### é‡å†™ä¸Žé‡è½½

**é‡å†™** æ˜¯å­ç±»å¯¹çˆ¶ç±»çš„è¡Œä¸ºï¼Œå­ç±»é‡å†™çˆ¶ç±»ä¸­çš„æ–¹æ³•å·²æ»¡è¶³éœ€æ±‚ã€‚

**é‡è½½** ä¸€èˆ¬æ˜¯åœ¨ä¸€ä¸ªç±»ä¸­åŒåæ–¹æ³•ï¼Œä½¿å‚æ•°çš„ä¸ªæ•°ã€é¡ºåºã€ç±»åž‹ä¸åŒã€‚

## æŽ¥å£ã€æŠ½è±¡ç±»

## å€¼ä¼ é€’ã€åœ°å€ä¼ é€’é—®é¢˜

Javaä¸­åªæœ‰å€¼ä¼ é€’ã€‚åœ¨Cè¯­è¨€ç­‰è¯­è¨€ä¸­æ—¢æœ‰å€¼ä¼ é€’åˆæœ‰åœ°å€ä¼ é€’ï¼Œå€¼ä¼ é€’ä¸ä¼šæ”¹å…¥å‚ï¼Œåœ°å€ä¼ é€’ä¼šæ”¹å˜å…¥å‚ã€‚

ä¸ºä»€ä¹ˆè¯´Javaä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ

1. åŸºæœ¬æ•°æ®ç±»åž‹éƒ½æ˜¯å€¼ä¼ é€’æ— ç–‘
2. å¯¹è±¡åœ¨ä¼ é€’æ˜¯ä¼ é€’çš„â€œå¥æŸ„â€˜â€™ï¼Œå¥æŸ„æ˜¯ä¸€ä¸ª32bitæˆ–64bitçš„æ•°æ®ï¼Œå¹¶ä¸æ˜¯å†…å­˜åœ°å€ï¼Œå› æ­¤ä¸æ˜¯åœ°å€ä¼ é€’

```text
                     stack      heap
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      int a = 1â”€â”€â”€â–ºâ”‚   1    â”‚  â”‚                        â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                        â”‚
     long b = 2L â”€â–ºâ”‚   2L   â”‚  â”‚                        â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”Œâ”€objâ”€â”€â”             â”‚
 Object obj = newâ”€â–ºâ”‚ 0x1000 â”œâ”€â”€â”¼â”€â”€â–ºâ”‚{   } â”‚             â”‚
                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â””â”€â”€â”€â”€â”€â”€â”˜             â”‚
                   â”‚        â”‚  â”‚                        â”‚
                   â”‚        â”‚  â”‚                        â”‚
                   â”‚        â”‚  â”‚                        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŸºæœ¬æ•°æ®ç±»åž‹

Javaæœ‰è¿™äº›åŸºæœ¬æ•°æ®ç±»åž‹ byteã€shortã€intã€longã€floatã€doubleã€booleanã€charï¼Œä»–ä»¬æ¯ä¸ªå¯¹åº”çš„è¿˜æœ‰åŒ…è£…æ•°æ®ç±»åž‹ Byteã€Shortã€Integerã€Longã€Floatã€Doubleã€Booleanã€Characterã€‚

### åŸºæœ¬æ•°æ®ç±»åž‹çš„å­˜å‚¨ã€ä¼ å€¼

åŸºæœ¬æ•°æ®ç±»åž‹æ˜¯å­˜åœ¨åœ¨æ ˆç©ºé—´ä¸­ï¼›åŸºæœ¬æ•°æ®ç±»åž‹ä¼ å€¼æ°¸è¿œæ˜¯å€¼ä¼ é€’ã€‚

åœ¨å†…å­˜æ¨¡åž‹ä¸­æ ˆåˆ’åˆ†æˆä¸€ä¸ªæŽ¥ç€ä¸€ä¸ªçš„æ’æ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ’æ§½å 32bitï¼ˆ4Byteï¼‰ï¼Œå…¶ä¸­intç±»åž‹å ä¸€ä¸ªæ’æ§½ï¼Œè€ŒLongç±»åž‹å ä¸¤ä¸ªæ’æ§½ã€‚å¦‚ä¸‹å›¾ç¤ºï¼š

```text
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ slot   â”‚â—„â”€â”€â”€ int
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ slot   â”‚â—„â”€â”€â”
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€long
       â”‚ slot   â”‚â—„â”€â”€â”˜
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  ...   â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  ...   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          stack
```

### åŒ…è£…æ•°æ®ç±»åž‹

åŒ…è£…æ•°æ®ç±»åž‹éƒ½æ˜¯ä¸å¯å˜ç±»åž‹ï¼›åŒ…è£…ç±»åž‹å…·æœ‰æ‹†ç®±ã€è£…ç®±è¡Œä¸ºï¼›åŒ…è£…ç±»åž‹å¸¦æœ‰ç¼“å­˜ã€‚

æ‹†ç®±è£…ç®±ã€‚æ‹†ç®±å’Œè£…ç®±éƒ½å±žäºŽJVMç¼–è¯‘æœŸçš„è¡Œä¸ºï¼Œæ˜¯è¯­æ³•ç³–ðŸ¬ï¼Œè£…ç®±å³ `Integer.valueOf()`ï¼Œæ‹†ç®±å³ `IntegerObj.intValue()` ã€‚ä½•æ—¶è¿›è¡Œï¼Ÿåœ¨æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹èµ‹å€¼ç»™ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹æ—¶ä¼šè¿›è¡Œæ‹†ç®±ï¼Œåä¹‹æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹èµ‹å€¼ç»™ä¸€ä¸ªåŒ…è£…ç±»åž‹ä¼šè¿›è¡Œè£…ç®±ã€‚

åŒ…è£…æ•°æ®ç±»åž‹çš„ç¼“å­˜ã€‚åœ¨ä½¿ç”¨åŒ…è£…æ•°æ®ç±»åž‹çš„ `valueOf` æ–¹æ³•æ—¶å°±ä½¿ç”¨äº†ç¼“å­˜ï¼Œæ•´åž‹çš„ç¼“å­˜èŒƒå›´æ˜¯[-128, 127]ã€‚éœ€è¦æ³¨æ„ï¼Œç¼“å­˜æ˜¯å…±äº«æ•°æ®ï¼Œè¯·å‹¿ä½¿ç”¨å®ƒåšçº¿ç¨‹çš„é”å¯¹è±¡ã€‚

Integerçš„ç¼“å­˜ï¼š

```java
    public static Integer valueOf(int i) {
        if (i >= IntegerCache.low && i <= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];
        return new Integer(i);
    }
```

Longçš„ç¼“å­˜ï¼š

```java
    public static Long valueOf(long l) {
        final int offset = 128;
        if (l >= -128 && l <= 127) { // will cache
            return LongCache.cache[(int)l + offset];
        }
        return new Long(l);
    }
```

### æµ®ç‚¹åž‹

æµ®ç‚¹åž‹é€šå¸¸ä½¿ç”¨ [IEEE 754 æ ‡å‡†](https://zh.wikipedia.org/wiki/IEEE_754)ï¼Œç»å¤§å¤šæ•°ç³»ç»Ÿå’Œç¼–ç¨‹è¯­è¨€éƒ½ä½¿ç”¨ç”¨è¿™ä¸ªæ ‡å‡†ï¼ŒJavaä¹Ÿæ˜¯ã€‚

æµ®ç‚¹åž‹åˆ†ä¸ºå•ç²¾åº¦4Byteå’ŒåŒç²¾åº¦8Byteï¼Œä»¥å•ç²¾åº¦ä¸ºä¾‹ï¼š

![å•ç²¾åº¦å›¾ç¤º](https://oss.elltor.com/uploads/xdocs/2021/590px-Float_example.svg.png)

- ä½¿ç”¨1bitè¡¨ç¤ºæ­£è´Ÿ
- ä½¿ç”¨8bitè¡¨ç¤ºæŒ‡æ•°ï¼Œå³åç§»é‡
- ä½¿ç”¨23bitè¡¨ç¤ºæœ‰æ•ˆå€¼ï¼Œå®žé™…å½“ä½œ24bitï¼Œçº¢è‰²åŒºåŸŸæœ€å·¦è¾¹æ€»æ˜¯1

Javaæµ®ç‚¹åž‹é—®é¢˜ã€‚å•ç²¾åº¦æµ®ç‚¹åž‹é€šå¸¸ä¿è¯å°æ•°ç‚¹åŽ6ä½ç²¾åº¦ï¼Œç¬¬6ä½ä¹‹åŽå°±æ˜¯éšæœºçš„å€¼äº†ï¼Œè¿™ä¸ªé—®é¢˜ä¼šåœ¨èµ‹å€¼çš„æ—¶å€™å°±å‘ç”Ÿã€‚æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸‹è¿™ä¸ªé—®é¢˜ã€‚

```java
    float f = 0.12345600000f;
    System.out.printf("%.10f \n", f);
    // output
    float f2 = 0.123456789f;
    System.out.printf("%.15f \n", f2);
    // output
    // 0.1234560013
    // 0.123456791043282
```


